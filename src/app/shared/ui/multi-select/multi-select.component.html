<div class="select-g" (clickOutside)="closeDropdown()">
    <label *ngIf="labelText" [for]="id" class="block text-sm font-medium text-darkGray">
        {{ labelText }}
    </label>
    <div class="select-box" (click)="toggleDropdown()">
        <div class="selected-display">
            {{ getDisplayText() }}
        </div>
        <div class="icon">
            <svg
                    class="shrink-0 size-3.5"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
            >
                <path d="m7 15 5 5 5-5"></path>
                <path d="m7 9 5-5 5 5"></path>
            </svg>
        </div>
    </div>
    <ul class="dropdown" *ngIf="dropdownVisible">
        <input type="text" [(ngModel)]="searchTerm" (input)="filterItems()" placeholder="Buscar..." class="search-input" />
        <li *ngFor="let item of filteredItems" (click)="toggleSelection(item.id)">
            <span>{{ item.name }}</span>
            <span class="checkmark" *ngIf="isSelected(item.id)">
                <svg
                        class="shrink-0 size-3.5 text-blue-600"
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                >
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            </span>
        </li>
        <li *ngIf="filteredItems.length === 0">
            Ninguna coincidencia
        </li>
    </ul>
    <div *ngIf="sendform && errorMessage" class="text-red-500 text-sm mt-1">
        {{ errorMessage }}
    </div>
</div>