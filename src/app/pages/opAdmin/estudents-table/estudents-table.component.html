<div>
    <p class="text-xl font-semibold text-gray-800 dark:text-neutral-200">Estudiantes</p>
</div>
<div class="mb-10">
    <p class="text-lg text-gray-600 dark:text-neutral-100">Observe los estudiantes matriculados en el presente ciclo
        académico</p>
</div>

<div class="flex flex-wrap justify-center gap-4">
    <div *ngFor="let estudiante of filteredEstudiantes" class="">
        <div class="body">
            <a class="card human-resources">
                <div class="overlay"></div>
                <div class="circle">
                    <ng-container *ngIf="estudiante.genero === 'Masculino'">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"
                            width="60" height="60">
                            <path
                                d="M24,11.5a3.5,3.5,0,0,1-3.268,3.492A11.037,11.037,0,0,1,16,19.954V23a1,1,0,0,1-1,1H9a1,1,0,0,1-1-1V19.953a11.264,11.264,0,0,1-4.542-4.572,1,1,0,1,1,1.776-.92C6.4,16.717,9.1,19,12,19h0c3.129,0,6.212-2.779,7.128-5.376a.994.994,0,0,1,1.117-.651A1.606,1.606,0,0,0,20.5,13a1.5,1.5,0,0,0,.27-2.972,1,1,0,0,1-.816-.878,7.962,7.962,0,0,0-4.013-6.11,12.8,12.8,0,0,1-1.128,2.541,15.09,15.09,0,0,1-4.956,4.467,1.5,1.5,0,1,1-1.724.84,15.806,15.806,0,0,1-7.257,1.1A1,1,0,0,1,.5,10.136,6.372,6.372,0,0,0,1.819,7.767C3.124,4.674,5.1,0,12,0a9.975,9.975,0,0,1,9.851,8.274A3.5,3.5,0,0,1,24,11.5Zm-8,0A1.5,1.5,0,1,0,14.5,13,1.5,1.5,0,0,0,16,11.5Z"
                                fill="#3B6CB7" />
                        </svg>
                    </ng-container>
                    <ng-container *ngIf="estudiante.genero === 'Femenino'">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"
                            width="60" height="60">
                            <path fill="#3B6CB7"
                                d="M23.925,18.144A5,5,0,0,1,19,24H16a1,1,0,0,1-1-1V20.41A8.218,8.218,0,0,1,12,21a8.222,8.222,0,0,1-3-.6V23a1,1,0,0,1-1,1H5A5,5,0,0,1,.075,18.144l.3-1.74a2.939,2.939,0,0,1,5.337-1.138C6.976,17.124,9.409,19,12,19h0c3.13,0,6.214-2.779,7.13-5.376a1.03,1.03,0,0,1,.959-.667l.432.007A1.461,1.461,0,0,0,22,11.5a1.5,1.5,0,0,0-1.23-1.474,1,1,0,0,1-.816-.879A7.961,7.961,0,0,0,15.941,3.04a12.87,12.87,0,0,1-1.127,2.541,15.089,15.089,0,0,1-4.956,4.467,1.5,1.5,0,1,1-1.725.84,15.807,15.807,0,0,1-7.257,1.1A1,1,0,0,1,.5,10.136,6.372,6.372,0,0,0,1.819,7.767C3.124,4.674,5.1,0,12,0a9.972,9.972,0,0,1,9.85,8.274A3.5,3.5,0,0,1,24,11.5a3.428,3.428,0,0,1-.854,2.257c.007.026.025.047.03.075ZM16,11.5A1.5,1.5,0,1,0,14.5,13,1.5,1.5,0,0,0,16,11.5Z" />
                        </svg>
                    </ng-container>
                </div>

                <p>
                    <strong>
                        {{estudiante.apellidos}} {{estudiante.nombres}}
                    </strong>
                    <br>
                    {{estudiante.estudiante.curso}}
                    <br>
                    {{estudiante.estudiante.representante.apellidos}} {{estudiante.estudiante.representante.nombres}}
                    
                </p>   
                @if (estudiante.estado === 'Suspendido') {
                    <div class="flex justify-end mt-2 botonP">
                        <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600" (click)="openActiveModal(estudiante)">Activar Cuenta</button>
                    </div>

                }
                @if (estudiante.estado !== 'Suspendido') {
                    <div class="flex justify-end mt-2 botonP">
                        <button class="px-4 py-2 bg-red-100 text-red-500 rounded-md hover:bg-red-200" (click)="openSuspendModal(estudiante)">Suspender Cuenta</button>
                    </div>
                }
            </a>
            
        </div>
    </div>    
</div>

<!-- Modal para suspender cuenta -->
<ui-modal modalId="suspendModal" [isOpen]="isSuspendModalOpen">
    <p class="text-lg font-semibold mb-4">Suspender Cuenta</p>
    <p>¿Está seguro de que desea suspender la cuenta de {{ selectedEstudiante?.apellidos }} {{ selectedEstudiante?.nombres }}?</p>
    <div class="flex justify-end gap-4 mt-4">
        <button class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600" (click)="closeSuspendModal()">Cancelar</button>
        <button class="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600" (click)="suspendEstudiante()">Suspender</button>
    </div>
</ui-modal>

<!-- Modal para activar cuenta -->
<ui-modal modalId="activeModal" [isOpen]="isSuspendModalOpen">
    <p class="text-lg font-semibold mb-4">Activar Cuenta</p>
    <p>¿Está seguro de que desea activr la cuenta de {{ selectedEstudiante?.apellidos }} {{ selectedEstudiante?.nombres }}?</p>
    <div class="flex justify-end gap-4 mt-4">
        <button class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600" (click)="closeSuspendModal()">Cancelar</button>
        <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600" (click)="activateEstudiante()">Activar</button>
    </div>
</ui-modal>

<!-- Paginación -->
<div class="mt-4 flex justify-center items-center">
    <button class="px-3 py-1 mx-1 text-sm font-medium text-white bg-gray-700 rounded-md disabled:opacity-50"
        [disabled]="currentPage === 1" (click)="previousPage()">
        Anterior
    </button>
    <span class="mx-2 text-sm text-gray-700 dark:text-neutral-200">
        Página {{ currentPage }} de {{ totalPages }}
    </span>
    <button class="px-3 py-1 mx-1 text-sm font-medium text-white bg-gray-700 rounded-md disabled:opacity-50"
        [disabled]="currentPage === totalPages" (click)="nextPage()">
        Siguiente
    </button>
</div>