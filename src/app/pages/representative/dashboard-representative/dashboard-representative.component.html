<div class="w-full min-h-screen p-6">
    <div class="flex flex-row items-start justify-between">
        <!-- Calendario -->
        <div class="w-1/3 p-3">
            <app-calendar></app-calendar>
        </div>

        <div class="w-2/3 h-96 overflow-x-auto">
            <h3 class="text-2xl font-semibold mb-4">Estudiantes</h3>
            <div class="flex space-x-4 w-full">
                <!-- Tarjeta de Representado -->
                <div class="w-64 p-4 bg-blue-100 shadow-md rounded-lg flex-shrink-0">
                    <div class="flex flex-col items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"
                            width="50%" height="50%" class="mb-5">
                            <path
                                d="m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm-5,21.797v-3.297c0-.827.673-1.5,1.5-1.5h7c.827,0,1.5.673,1.5,1.5v3.297c-1.501.769-3.201,1.203-5,1.203s-3.499-.434-5-1.203Zm11-.582v-2.715c0-1.379-1.122-2.5-2.5-2.5h-7c-1.378,0-2.5,1.121-2.5,2.5v2.715c-3.008-1.965-5-5.362-5-9.215C1,5.935,5.935,1,12,1s11,4.935,11,11c0,3.853-1.992,7.25-5,9.215Zm-6-15.215c-2.206,0-4,1.794-4,4s1.794,4,4,4,4-1.794,4-4-1.794-4-4-4Zm0,7c-1.654,0-3-1.346-3-3s1.346-3,3-3,3,1.346,3,3-1.346,3-3,3Z" />
                        </svg>

                        <h3 class="text-lg font-semibold mb-4">Estudiante 1</h3>
                        <p class="text-sm text-gray-600">Curso: Octavo A</p>
                        <p class="text-sm text-gray-600">Asistencia: 90%</p>
                        <p class="text-sm text-gray-600">Promedio de Notas: 8.5</p>
                        <p class="text-sm text-gray-600">Promedio de Conducta: 9.0</p>
                    </div>
                </div>
                <!-- Repite el bloque de tarjeta para cada representado -->
                <div class="w-64 p-4 bg-yellow-100 shadow-md rounded-lg flex-shrink-0">
                    <div class="flex flex-col items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"
                            width="50%" height="50%" class="mb-5">
                            <path
                                d="m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm-5,21.797v-3.297c0-.827.673-1.5,1.5-1.5h7c.827,0,1.5.673,1.5,1.5v3.297c-1.501.769-3.201,1.203-5,1.203s-3.499-.434-5-1.203Zm11-.582v-2.715c0-1.379-1.122-2.5-2.5-2.5h-7c-1.378,0-2.5,1.121-2.5,2.5v2.715c-3.008-1.965-5-5.362-5-9.215C1,5.935,5.935,1,12,1s11,4.935,11,11c0,3.853-1.992,7.25-5,9.215Zm-6-15.215c-2.206,0-4,1.794-4,4s1.794,4,4,4,4-1.794,4-4-1.794-4-4-4Zm0,7c-1.654,0-3-1.346-3-3s1.346-3,3-3,3,1.346,3,3-1.346,3-3,3Z" />
                        </svg>

                        <h3 class="text-lg font-semibold mb-4">Estudiante 2</h3>
                        <p class="text-sm text-gray-600">Curso: Noveno B</p>
                        <p class="text-sm text-gray-600">Asistencia: 85%</p>
                        <p class="text-sm text-gray-600">Promedio de Notas: 7.5</p>
                        <p class="text-sm text-gray-600">Promedio de Conducta: 8.0</p>
                    </div>
                </div>
                <div class="w-64 p-4 bg-orange-100 shadow-md rounded-lg flex-shrink-0">
                    <div class="flex flex-col items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"
                            width="50%" height="50%" class="mb-5">
                            <path
                                d="m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm-5,21.797v-3.297c0-.827.673-1.5,1.5-1.5h7c.827,0,1.5.673,1.5,1.5v3.297c-1.501.769-3.201,1.203-5,1.203s-3.499-.434-5-1.203Zm11-.582v-2.715c0-1.379-1.122-2.5-2.5-2.5h-7c-1.378,0-2.5,1.121-2.5,2.5v2.715c-3.008-1.965-5-5.362-5-9.215C1,5.935,5.935,1,12,1s11,4.935,11,11c0,3.853-1.992,7.25-5,9.215Zm-6-15.215c-2.206,0-4,1.794-4,4s1.794,4,4,4,4-1.794,4-4-1.794-4-4-4Zm0,7c-1.654,0-3-1.346-3-3s1.346-3,3-3,3,1.346,3,3-1.346,3-3,3Z" />
                        </svg>
                        <h3 class="text-lg font-semibold mb-4">Estudiante 3</h3>
                        <p class="text-sm text-gray-600">Curso: Décimo C</p>
                        <p class="text-sm text-gray-600">Asistencia: 95%</p>
                        <p class="text-sm text-gray-600">Promedio de Notas: 9.0</p>
                        <p class="text-sm text-gray-600">Promedio de Conducta: 9.5</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="flex flex-col items-center mt-4 justify-between">
        <h3 class="text-2xl font-semibold mb-4">Informe de asistencias</h3>
        <canvas id="attendanceChartCanvas"></canvas>
    </div>
    <div class="flex flex-row gap-4 items-center justify-between mt-10">
        <div class="w-1/2 ">
            <div class="w-full h-96 flex flex-col items-center justify-start">
                <h3 class="text-2xl font-semibold mb-4">Materia más baja por estudiante</h3>

                <div class="grid grid-cols-1 pt-5 w-full gap-2 max-[500px]:grid-cols-1 px-5 overflow-y-auto">
                    <div *ngFor="let student of representados"
                        class="group w-full rounded-lg bg-[#d8e5ff] p-5 transition relative duration-300 cursor-pointer hover:translate-y-[3px] hover:shadow-[0_-8px_0px_0px_#A8D1D1]">
                        <p class="text-2xl">{{ student.nombre }}</p>
                        <p class="text-sm">{{ student.curso }} - Matemáticas - {{ student.promedio }}</p>
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                            id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512"
                            style="enable-background:new 0 0 512 512;" xml:space="preserve"
                            class="w-10 h-10 group-hover:opacity-100 absolute right-[10%] top-[50%] translate-y-[-50%] opacity-20 transition group-hover:scale-110 duration-300 svg-color">
                            <path class="svg-path" data-original="#000000" opacity="1"
                                d="M470.549,111.573L313.237,36.629c-34.628-20.684-77.728-21.051-112.704-0.96L41.451,111.573  c-0.597,0.299-1.216,0.619-1.792,0.96c-37.752,21.586-50.858,69.689-29.272,107.441c7.317,12.798,18.08,23.284,31.064,30.266  l43.883,20.907V375.68c0.026,46.743,30.441,88.039,75.072,101.931c31.059,8.985,63.264,13.384,95.595,13.056  c32.326,0.362,64.531-4,95.595-12.949c44.631-13.891,75.046-55.188,75.072-101.931V271.104l42.667-20.395v175.957  c0,11.782,9.551,21.333,21.333,21.333c11.782,0,21.333-9.551,21.333-21.333v-256C512.143,145.615,492.363,122.473,470.549,111.573z   M384,375.787c0.011,27.959-18.129,52.69-44.8,61.077c-27.046,7.728-55.073,11.479-83.2,11.136  c-28.127,0.343-56.154-3.408-83.2-11.136c-26.671-8.388-44.811-33.118-44.8-61.077v-84.309l70.763,33.707  c17.46,10.368,37.401,15.816,57.707,15.765c19.328,0.137,38.331-4.98,54.976-14.805L384,291.477V375.787z M452.267,211.733  l-160.896,76.8c-22.434,13.063-50.241,12.693-72.32-0.96l-157.419-74.88c-17.547-9.462-24.101-31.357-14.639-48.903  c3.2-5.934,7.998-10.853,13.85-14.201l159.893-76.373c22.441-13.034,50.233-12.665,72.32,0.96l157.312,74.944  c11.569,6.424,18.807,18.555,18.965,31.787C469.354,193.441,462.9,205.097,452.267,211.733L452.267,211.733z" />
                        </svg>

                    </div>
                </div>

            </div>
        </div>
        <div class="w-1/2 mb-4">
            <div class="w-full h-96 flex flex-col items-center justify-start">
                <h3 class="text-2xl font-semibold mb-4">Asignaciones pendientes</h3>
                <div class="w-full h-full rounded-lg">
                    <label for="studentSelect" class="block text-lg font-semibold mb-2">Selecciona un
                        Estudiante</label>
                    <div class="relative">
                        <select id="studentSelect"
                            class="w-full p-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            (change)="onStudentChange($event)">
                            <option value="" disabled selected>Seleccione un estudiante</option>
                            <option *ngFor="let student of representados" [value]="student.nombre">{{ student.nombre }}
                            </option>
                        </select>

                    </div>
                    <div *ngIf="selectedStudent" class="mt-6 max-h-60 overflow-y-auto">
                        <h3 class="text-xl font-semibold text-gray-700 mb-4">Asignaciones Pendientes</h3>
                        <div class="bg-white p-4 rounded-lg">
                            <ul class="space-y-2">
                                <li *ngFor="let assignment of selectedStudent.assignments"
                                    class="flex justify-between items-center p-2 border-b border-gray-200">
                                    <span class="font-medium text-gray-800">{{ assignment.name }}</span>
                                    <span class="text-sm text-gray-600">Tiempo restante: {{ assignment.timeRemaining
                                        }}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="flex flex-col gap-4 items-center justify-between mt-10">
        <h3 class="text-2xl font-semibold">Promedio por Materia</h3>
        <div class="w-full h-full rounded-lg">
            <label for="studentSelectForGrades" class="block text-lg font-semibold mb-2">Selecciona un
                Estudiante</label>
            <div class="relative">
                <select id="studentSelectForGrades"
                    class="w-full p-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    (change)="onStudentChangeForGrades($event)">
                    <option value="" disabled selected>Seleccione un estudiante</option>
                    <option *ngFor="let student of representados" [value]="student.nombre">{{ student.nombre }}</option>
                </select>
            </div>
            <div *ngIf="selectedStudentForGrades" class="mt-6 w-full">
                <canvas id="gradesChartCanvas"></canvas>
            </div>
        </div>

    </div>
</div>